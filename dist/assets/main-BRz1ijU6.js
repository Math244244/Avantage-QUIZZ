const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/services-B8oy3dvD.js","assets/admin-MwW8t9Ay.js","assets/quiz-MXwz6Ea-.js"])))=>i.map(i=>d[i]);
import"./micro-interactions-CO1fend8.js";import{t as b,_ as B,s as P,p as C,u as I,j as M,o as S,g as A,q as z,e as w}from"./admin-MwW8t9Ay.js";import{t as T,b as O}from"./quiz-MXwz6Ea-.js";import{l as $,s as g,M as q,g as _,m as R,n as N,o as j,p as H}from"./services-B8oy3dvD.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-functions.js";import"https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";const Q="avantage-quizz-sync",U=1,d="sync-queue";let p=null;async function h(){return p||new Promise((t,e)=>{const n=indexedDB.open(Q,U);n.onerror=()=>e(n.error),n.onsuccess=()=>{p=n.result,t(p)},n.onupgradeneeded=o=>{const s=o.target.result;if(!s.objectStoreNames.contains(d)){const r=s.createObjectStore(d,{keyPath:"id",autoIncrement:!0});r.createIndex("timestamp","timestamp",{unique:!1}),r.createIndex("type","type",{unique:!1}),r.createIndex("status","status",{unique:!1})}}})}class V{constructor(){this.isProcessing=!1,this.listeners=new Set}async add(e,n,o={}){await h();const s={type:e,operation:this.serializeOperation(n),data:o,timestamp:Date.now(),status:"pending",retries:0,maxRetries:3};return new Promise((r,a)=>{const l=p.transaction([d],"readwrite").objectStore(d).add(s);l.onsuccess=()=>{const u=l.result;console.log(`üì• Op√©ration ajout√©e √† la file d'attente: ${e} (ID: ${u})`),this.notifyListeners("added",{id:u,type:e}),r(u)},l.onerror=()=>a(l.error)})}serializeOperation(e){return{name:e.name||"anonymous"}}async getAll(){return await h(),new Promise((e,n)=>{const a=p.transaction([d],"readonly").objectStore(d).index("status").getAll("pending");a.onsuccess=()=>e(a.result),a.onerror=()=>n(a.error)})}async markCompleted(e){return await h(),new Promise((n,o)=>{const r=p.transaction([d],"readwrite").objectStore(d),a=r.get(e);a.onsuccess=()=>{const c=a.result;if(c){c.status="completed";const i=r.put(c);i.onsuccess=()=>{console.log(`‚úÖ Op√©ration compl√©t√©e: ${c.type} (ID: ${e})`),this.notifyListeners("completed",{id:e,type:c.type}),n()},i.onerror=()=>o(i.error)}else n()},a.onerror=()=>o(a.error)})}async markFailed(e,n){return await h(),new Promise((o,s)=>{const a=p.transaction([d],"readwrite").objectStore(d),c=a.get(e);c.onsuccess=()=>{const i=c.result;if(i){i.retries++,i.retries>=i.maxRetries?(i.status="failed",i.error=n?.message||"Unknown error"):i.status="pending";const l=a.put(i);l.onsuccess=()=>{i.status==="failed"?(console.error(`‚ùå Op√©ration √©chou√©e d√©finitivement: ${i.type} (ID: ${e})`),this.notifyListeners("failed",{id:e,type:i.type,error:n})):console.warn(`‚ö†Ô∏è Op√©ration √©chou√©e, r√©essai ${i.retries}/${i.maxRetries}: ${i.type} (ID: ${e})`),o()},l.onerror=()=>s(l.error)}else o()},c.onerror=()=>s(c.error)})}async remove(e){return await h(),new Promise((n,o)=>{const a=p.transaction([d],"readwrite").objectStore(d).delete(e);a.onsuccess=()=>{console.log(`üóëÔ∏è Op√©ration supprim√©e: ID ${e}`),n()},a.onerror=()=>o(a.error)})}async processQueue(e={}){if(this.isProcessing){console.log("‚è≥ Traitement d√©j√† en cours...");return}if(!navigator.onLine){console.log("üì¥ Hors ligne, synchronisation report√©e");return}this.isProcessing=!0,console.log("üîÑ D√©but du traitement de la file d'attente...");try{const n=await this.getAll();if(n.length===0)return console.log("‚úÖ Aucune op√©ration en attente"),this.isProcessing=!1,{success:0,failed:0};console.log(`üìã ${n.length} op√©ration(s) en attente`);let o=0,s=0;for(const r of n)try{const a=e[r.type];if(!a){console.warn(`‚ö†Ô∏è Aucun handler pour le type: ${r.type}`),await this.markFailed(r.id,new Error(`No handler for type: ${r.type}`)),s++;continue}await a(r.data),await this.markCompleted(r.id),await this.remove(r.id),o++}catch(a){console.error(`‚ùå Erreur traitement op√©ration ${r.id}:`,a),await this.markFailed(r.id,a),s++}return console.log(`‚úÖ Traitement termin√©: ${o} r√©ussies, ${s} √©chou√©es`),this.notifyListeners("processed",{success:o,failed:s}),{success:o,failed:s}}catch(n){throw console.error("‚ùå Erreur traitement file d'attente:",n),n}finally{this.isProcessing=!1}}async getStats(){return await h(),new Promise((e,n)=>{const r=p.transaction([d],"readonly").objectStore(d).getAll();r.onsuccess=()=>{const a=r.result,c={total:a.length,pending:a.filter(i=>i.status==="pending").length,completed:a.filter(i=>i.status==="completed").length,failed:a.filter(i=>i.status==="failed").length};e(c)},r.onerror=()=>n(r.error)})}async cleanCompleted(){await h();const e=Date.now()-10080*60*1e3;return new Promise((n,o)=>{const c=p.transaction([d],"readwrite").objectStore(d).index("timestamp").openCursor();let i=0;c.onsuccess=l=>{const u=l.target.result;if(u){const F=u.value;F.status==="completed"&&F.timestamp<e&&(u.delete(),i++),u.continue()}else console.log(`üßπ ${i} op√©ration(s) compl√©t√©e(s) nettoy√©e(s)`),n(i)},c.onerror=()=>o(c.error)})}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(e,n){this.listeners.forEach(o=>{try{o(e,n)}catch(s){console.error("Erreur listener:",s)}})}}const x=new V;h().catch(t=>{console.error("‚ùå Erreur initialisation IndexedDB:",t)});const Ee=Object.freeze(Object.defineProperty({__proto__:null,syncQueue:x},Symbol.toStringTag,{value:"Module"}));class G{constructor(){this.isOnline=navigator.onLine,this.listeners=new Set,this.indicatorElement=null,this.setupEventListeners(),this.createIndicator()}setupEventListeners(){window.addEventListener("online",()=>this.handleOnline()),window.addEventListener("offline",()=>this.handleOffline()),setInterval(()=>this.checkConnection(),3e4)}async checkConnection(){try{const e=await fetch("https://firestore.googleapis.com",{method:"HEAD",mode:"no-cors",cache:"no-cache"});this.isOnline||this.handleOnline()}catch{this.isOnline&&this.handleOffline()}}async handleOnline(){if(!this.isOnline){this.isOnline=!0,console.log("üåê Connexion r√©tablie"),this.updateIndicator(),this.notifyListeners("online"),b.success("Connexion r√©tablie. Synchronisation en cours...",3e3);try{const{saveQuizResult:e}=await B(async()=>{const{saveQuizResult:o}=await import("./services-B8oy3dvD.js").then(s=>s.r);return{saveQuizResult:o}},__vite__mapDeps([0,1,2])),n=await x.getStats();if(n.pending>0){console.log(`üì§ Synchronisation de ${n.pending} op√©ration(s) en attente...`);const o={quizResult:async r=>{await e(r)}},s=await x.processQueue(o);s.success>0&&b.success(`${s.success} op√©ration(s) synchronis√©e(s) avec succ√®s`,3e3),s.failed>0&&b.warning(`${s.failed} op√©ration(s) n'ont pas pu √™tre synchronis√©es`,3e3)}}catch(e){console.error("‚ùå Erreur synchronisation:",e),b.error("Erreur lors de la synchronisation",3e3)}}}handleOffline(){this.isOnline&&(this.isOnline=!1,console.log("üì¥ Connexion perdue"),this.updateIndicator(),this.notifyListeners("offline"),b.warning("Connexion perdue. Les donn√©es seront sauvegard√©es localement.",5e3))}createIndicator(){this.indicatorElement=document.createElement("div"),this.indicatorElement.id="offline-indicator",this.indicatorElement.className="fixed bottom-4 right-4 z-50 flex items-center gap-2 px-4 py-2 rounded-lg shadow-lg transition-all duration-300",this.indicatorElement.style.display="none",document.body.appendChild(this.indicatorElement),this.updateIndicator()}updateIndicator(){this.indicatorElement&&(this.isOnline?this.indicatorElement.style.display="none":(this.indicatorElement.style.display="flex",this.indicatorElement.className="fixed bottom-4 right-4 z-50 flex items-center gap-2 px-4 py-2 rounded-lg shadow-lg bg-yellow-500 text-white transition-all duration-300",this.indicatorElement.innerHTML=`
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"></path>
                </svg>
                <span class="text-sm font-medium">Mode hors ligne</span>
            `))}getStatus(){return{isOnline:this.isOnline,timestamp:Date.now()}}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(e){this.listeners.forEach(n=>{try{n(e,this.getStatus())}catch(o){console.error("Erreur listener offline:",o)}})}}new G;console.log("Initialisation de la page d accueil...");document.addEventListener("DOMContentLoaded",W);function W(){console.log("üìÑ DOM charg√© - configuration du bouton de connexion...");const t=document.getElementById("google-signin-btn");t?(t.addEventListener("click",Z),console.log("‚úÖ Bouton Google configur√©")):console.warn("‚ö†Ô∏è Bouton Google non trouv√©")}async function Z(){console.log("üîê Clic sur connexion Google...");const t=P("Connexion en cours...");try{const e=await C();I(t,`Bienvenue ${e.displayName} !`,"success"),setTimeout(()=>{window.location.reload()},800)}catch(e){console.error("‚ùå Erreur connexion Google:",e);let n="Erreur lors de la connexion";e.code==="auth/popup-closed-by-user"?n="Connexion annul√©e":e.code==="auth/popup-blocked"?n="Pop-up bloqu√©e. Autorisez les pop-ups.":e.code==="auth/unauthorized-domain"?n="Domaine non autoris√© dans Firebase":e.code==="auth/network-request-failed"&&(n="Erreur r√©seau. V√©rifiez votre connexion."),I(t,n,"error")}}(function(){document.documentElement&&(document.documentElement.style.setProperty("background","#FFFFFF","important"),document.documentElement.style.setProperty("background-color","#FFFFFF","important"),document.documentElement.style.setProperty("background-image","none","important")),document.body&&(document.body.style.setProperty("background","#FFFFFF","important"),document.body.style.setProperty("background-color","#FFFFFF","important"),document.body.style.setProperty("background-image","none","important"));const t=new MutationObserver(()=>{const e=document.getElementById("main-content");e&&(e.style.setProperty("background","#FFFFFF","important"),e.style.setProperty("background-color","#FFFFFF","important"),e.style.setProperty("background-image","none","important"))});document.body&&t.observe(document.body,{childList:!0,subtree:!0})})();const y=$(),Y=q;g.set("monthsData",Y.map(t=>({name:t,score:null})));g.set("currentMonthIndex",y);const E={login:document.getElementById("login-view"),dashboard:document.getElementById("dashboard-view"),moduleSelection:document.getElementById("module-selection-view")},m={modulesGrid:document.getElementById("modules-grid"),annualProgressBar:document.getElementById("annual-progress-bar"),annualProgressText:document.getElementById("annual-progress-text"),moduleSelectionTitle:document.getElementById("module-selection-title"),welcomeMessage:document.getElementById("welcome-message"),userAvatar:document.getElementById("user-avatar"),userName:document.getElementById("user-name"),googleSigninBtn:document.getElementById("google-signin-btn"),signoutLink:document.getElementById("signout-link")};g.set("dashboardEventDelegationAttached",!1);function f(t){Object.values(E).forEach(e=>{e&&e.classList.add("view-hidden")}),E[t]?(E[t].classList.remove("view-hidden"),v()):console.error("‚ùå Vue non trouv√©e:",t)}function v(){if(window.forceWhiteBackground&&window.forceWhiteBackground!==v){window.forceWhiteBackground();return}const t=document.getElementById("main-content");t&&(t.style.setProperty("background","#FFFFFF","important"),t.style.setProperty("background-color","#FFFFFF","important"),t.style.setProperty("background-image","none","important")),document.body.style.setProperty("background","#FFFFFF","important"),document.body.style.setProperty("background-color","#FFFFFF","important"),document.body.style.setProperty("background-image","none","important"),document.documentElement.style.setProperty("background","#FFFFFF","important"),document.documentElement.style.setProperty("background-color","#FFFFFF","important"),document.documentElement.style.setProperty("background-image","none","important"),t&&t.classList.remove("bg-slate-100","bg-gray-100","bg-yellow-50","bg-amber-50","bg-ap-red-50"),document.body.classList.remove("bg-slate-100","bg-gray-100","bg-yellow-50","bg-amber-50","bg-ap-red-50"),document.documentElement.classList.remove("bg-slate-100","bg-gray-100","bg-yellow-50","bg-amber-50","bg-ap-red-50")}function k(t){document.querySelectorAll(".nav-link").forEach(n=>{n.classList.remove("bg-indigo-800","text-indigo-100"),n.classList.add("text-indigo-300")});const e=document.getElementById(t);e&&(e.classList.add("bg-indigo-800","text-indigo-100"),e.classList.remove("text-indigo-300"))}function K(t,e){const o=(a=>a>=90?{badgeText:"üèÜ Excellent"}:a>=75?{badgeText:"‚≠ê Tr√®s bien"}:a>=60?{badgeText:"‚úì Bien"}:{badgeText:"‚úì Passable"})(e),s=w(t),r=w(e);return`
        <div class="module-card module-card--completed">
            <div class="module-card-header">
                <div class="module-card-icon">
                    <svg fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="module-card-badge">${o.badgeText}</div>
            </div>
            <h3 class="module-card-title">${s}</h3>
            <p class="module-card-subtitle">Quiz compl√©t√©</p>
            <p class="module-card-progress-label">Score obtenu</p>
            <div class="module-card-progress-bar">
                <div class="module-card-progress-fill" style="width: ${r}%"></div>
            </div>
            <span class="text-sm font-semibold text-ap-red-dark">Score: ${r}%</span>
        </div>
    `}function J(t){return`
        <div class="module-card module-card--locked">
            <div class="module-card-header">
                <div class="module-card-icon">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                    </svg>
                </div>
                <div class="module-card-badge">üîí Verrouill√©</div>
            </div>
            <h3 class="module-card-title">${w(t)}</h3>
            <p class="module-card-subtitle">Disponible le 1er du mois</p>
            <p class="module-card-progress-label">Progression</p>
            <div class="module-card-progress-bar">
                <div class="module-card-progress-fill" style="width: 0%"></div>
            </div>
            <span class="text-sm text-ap-gray-600">Pas encore accessible</span>
        </div>
    `}function X(t){return`
        <div class="module-card module-card--incomplete">
            <div class="module-card-header">
                <div class="module-card-icon">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div class="module-card-badge">‚ö†Ô∏è √Ä compl√©ter</div>
            </div>
            <h3 class="module-card-title">${w(t)}</h3>
            <p class="module-card-subtitle">Mois manqu√© - Rattrapez-le !</p>
            <p class="module-card-progress-label">Progression</p>
            <div class="module-card-progress-bar">
                <div class="module-card-progress-fill" style="width: 0%"></div>
            </div>
            <span class="text-sm font-semibold text-ap-accent-medium">0% compl√©t√©</span>
        </div>
    `}function ee(t){return`
        <div class="module-card module-card--active">
            <div class="module-card-header">
                <div class="module-card-icon">
                    <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                    </svg>
                </div>
                <div class="module-card-badge">‚ö° Actif</div>
            </div>
            <h3 class="module-card-title">${w(t)}</h3>
            <p class="module-card-subtitle">Pr√™t √† √™tre compl√©t√© !</p>
            <p class="module-card-progress-label">Progression</p>
            <div class="module-card-progress-bar">
                <div class="module-card-progress-fill" style="width: 0%"></div>
            </div>
            <button class="start-quiz-button btn-primary w-full mt-2 flex items-center justify-center gap-2">
                <span>D√©marrer</span>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                </svg>
            </button>
        </div>
    `}function te(){const t=g.get("monthsData");let e=0;for(let n=y-1;n>=0&&(t[n].score!==null&&t[n].score>=60);n--)e++;return e}async function ne(){try{const t=A();if(!t){console.log("‚ÑπÔ∏è Aucun utilisateur - pas de donn√©es √† charger");return}console.log("üìä Chargement des donn√©es du dashboard...");const e=await _(t.uid);e&&await z(e);const n=await R(t.uid),o=N();let s=g.get("monthsData");s=s.map((c,i)=>{const l=j(c.name,o);return n[l]?{name:c.name,score:n[l].score}:c});const r=await H(t.uid),a=document.getElementById("streak-count");a&&(a.textContent=r),console.log("‚úÖ Donn√©es du dashboard charg√©es")}catch(t){console.error("‚ùå Erreur chargement donn√©es:",t)}}async function oe(){if(!m.modulesGrid){console.error("‚ùå L'√©l√©ment 'modules-grid' est introuvable.");return}v(),await ne(),m.modulesGrid.innerHTML="";let t=0;const{getMonthlyQuizStatus:e}=await B(async()=>{const{getMonthlyQuizStatus:c}=await import("./quiz-MXwz6Ea-.js").then(i=>i.q);return{getMonthlyQuizStatus:c}},__vite__mapDeps([2,1,0]));g.get("monthsData").forEach((c,i)=>{let l="";const u=e(i,y,c.score);u==="completed"?(l=K(c.name,c.score),t++):u==="active"?l=ee(c.name):u==="incomplete"?l=X(c.name):u==="locked"&&(l=J(c.name)),m.modulesGrid.innerHTML+=l});const o=t/12*100;m.annualProgressBar.style.width=`${o}%`,m.annualProgressText.textContent=`${t}/12`;const s=te(),r=document.getElementById("streak-count");r&&(r.textContent=s);const a=document.getElementById("streak-badge");a&&s===0&&(a.style.display="none"),ce(),setTimeout(()=>{se(),re(),ae()},500)}function se(){const t=document.getElementById("skills-radar-chart");t&&new Chart(t,{type:"radar",data:{labels:["Proc√©dures","Garanties","Documentation","Inspection","Entretien","R√©glementation"],datasets:[{label:"Vos Comp√©tences",data:[92,88,85,90,87,94],backgroundColor:"rgba(99, 102, 241, 0.2)",borderColor:"rgb(99, 102, 241)",borderWidth:2,pointBackgroundColor:"rgb(99, 102, 241)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(99, 102, 241)"}]},options:{responsive:!0,maintainAspectRatio:!0,scales:{r:{beginAtZero:!0,max:100,ticks:{stepSize:20}}},plugins:{legend:{display:!1}}}})}function re(){const t=document.getElementById("scores-trend-chart");if(!t)return;const n=g.get("monthsData").filter((o,s)=>s<y);new Chart(t,{type:"line",data:{labels:n.map(o=>o.name),datasets:[{label:"Score (%)",data:n.map(o=>o.score),backgroundColor:"rgba(99, 102, 241, 0.1)",borderColor:"rgb(99, 102, 241)",borderWidth:3,fill:!0,tension:.4,pointRadius:5,pointHoverRadius:7,pointBackgroundColor:"rgb(99, 102, 241)",pointBorderColor:"#fff",pointBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!0,scales:{y:{beginAtZero:!0,max:100,ticks:{callback:function(o){return o+"%"}}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(o){return"Score: "+o.parsed.y+"%"}}}}}})}function ae(){const t=document.getElementById("activity-heatmap");if(!t)return;const e=52,n=7;let o='<div class="flex gap-1">';for(let s=0;s<e;s++){o+='<div class="flex flex-col gap-1">';for(let r=0;r<n;r++){const a=s*n+r;let c=0;a%30<28&&(c=Math.floor(Math.random()*4)+1),o+=`<div class="w-3 h-3 rounded-sm ${["bg-slate-100","bg-green-200","bg-green-400","bg-green-600","bg-green-800"][c]}" title="Activit√©"></div>`}o+="</div>"}o+="</div>",t.innerHTML=o}let L=!1;function ie(){L||(L=!0,console.log("üîß Attachement des listeners de navigation (une seule fois)..."),document.getElementById("nav-dashboard")?.addEventListener("click",t=>{t.preventDefault(),f("dashboard"),k("nav-dashboard")}),document.getElementById("nav-quiz")?.addEventListener("click",t=>{t.preventDefault();const n=g.get("monthsData")[y]?.name||"ce mois";m.moduleSelectionTitle.textContent=`Quiz de ${n}`,f("moduleSelection"),k("nav-quiz")}),document.getElementById("nav-results")?.addEventListener("click",t=>{t.preventDefault();const e=t.currentTarget;window.__QUIZ_ACTIVE?confirm("Un quiz est en cours. Voulez-vous vraiment quitter ?")&&e&&e.href&&(window.location.href=e.href):e&&e.href&&(window.location.href=e.href)}),document.getElementById("nav-resources")?.addEventListener("click",t=>{t.preventDefault();const e=t.currentTarget;window.__QUIZ_ACTIVE?confirm("Un quiz est en cours. Voulez-vous vraiment quitter ?")&&e&&e.href&&(window.location.href=e.href):e&&e.href&&(window.location.href=e.href)}),console.log("‚úÖ Listeners de navigation attach√©s"))}function ce(){g.get("dashboardEventDelegationAttached")||(document.addEventListener("click",t=>{if(t.target.closest(".start-quiz-button")){t.preventDefault();const r=g.get("monthsData")[y]?.name||"ce mois";m.moduleSelectionTitle.textContent=`Quiz de ${r}`,f("moduleSelection"),k("nav-quiz");return}if(t.target.closest(".back-to-dashboard")){t.preventDefault(),f("dashboard"),k("nav-dashboard");return}const o=t.target.closest(".module-card, .module-card-professional, [data-module]");if(o){t.preventDefault();const s=o.getAttribute("data-module");s&&(console.log("üéØ Module s√©lectionn√©:",s),O(s))}}),g.set("dashboardEventDelegationAttached",!0))}function le(t){if(t){m.userName.textContent=t.displayName||"Utilisateur",m.userAvatar.src=t.photoURL||"https://placehold.co/100x100/667eea/e0e7ff?text="+(t.displayName?.[0]||"U");const e=g.get("monthsData"),n=t.displayName?.split(" ")[0]||"Utilisateur",o=e[y]?.name||"ce mois";m.welcomeMessage.textContent=`Bonjour ${n}, pr√™t √† relever votre d√©fi de ${o} ?`}}function de(){const t=localStorage.getItem("theme")||"light";document.documentElement.classList.toggle("dark",t==="dark"),D(t)}function D(t){const e=document.getElementById("theme-icon-sun"),n=document.getElementById("theme-icon-moon"),o=document.getElementById("theme-text");t==="dark"?(e?.classList.remove("hidden"),n?.classList.add("hidden"),o&&(o.textContent="Mode Clair")):(e?.classList.add("hidden"),n?.classList.remove("hidden"),o&&(o.textContent="Mode Sombre"))}function ue(){const e=(document.documentElement.classList.contains("dark")?"dark":"light")==="dark"?"light":"dark";document.documentElement.classList.toggle("dark"),localStorage.setItem("theme",e),D(e);const n=document.getElementById("theme-toggle");if(n){const o=e==="dark";n.setAttribute("aria-pressed",o?"true":"false"),n.setAttribute("aria-label",o?"D√©sactiver le mode sombre":"Activer le mode sombre")}}document.addEventListener("DOMContentLoaded",()=>{T("Dashboard","/index.html"),console.log("üöÄ Initialisation de QuizPro..."),de(),ie(),document.getElementById("theme-toggle")?.addEventListener("click",ue),m.googleSigninBtn?.addEventListener("click",C),m.signoutLink?.addEventListener("click",t=>{t.preventDefault(),confirm("Voulez-vous vraiment vous d√©connecter ?")&&M()}),f("login"),S(t=>{t?(console.log("‚úÖ Utilisateur connect√©:",t.displayName),le(t),f("dashboard"),k("nav-dashboard"),oe()):(console.log("üë§ Aucun utilisateur connect√©"),f("login"))}),document.addEventListener("visibilitychange",()=>{document.hidden||v()}),window.addEventListener("focus",()=>{v()}),window.addEventListener("pageshow",t=>{t.persisted&&v()}),console.log("‚úÖ QuizPro initialis√© avec succ√®s")});export{Ee as s};
//# sourceMappingURL=main-BRz1ijU6.js.map
