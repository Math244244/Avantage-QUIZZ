{"version":3,"file":"resources-DXPadtut.js","sources":["../../js/resources.js"],"sourcesContent":["// Page Ressources - Gestion de la biblioth√®que de documents\r\nimport { db } from './firebase-config.js';\r\nimport { collection, query, orderBy, getDocs, addDoc, deleteDoc, doc, where } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';\r\nimport { getCurrentUser, onAuthChange, signOutUser, isDemoMode, getDemoUser } from './auth.js';\r\nimport { toast } from './toast.js';\r\nimport {\r\n    createResourceSkeleton,\r\n    showSkeleton,\r\n    hideSkeleton\r\n} from './skeleton.js';\r\n\r\n// √âtat\r\nlet allResources = [];\r\nlet filteredResources = [];\r\nlet isAdmin = false;\r\n\r\n// Configuration\r\nconst categoryNames = {\r\n    'guides': { name: 'Guides', icon: 'üìñ', color: 'blue' },\r\n    'manuels': { name: 'Manuels', icon: 'üìã', color: 'green' },\r\n    'reglements': { name: 'R√®glements', icon: 'üõ°Ô∏è', color: 'orange' },\r\n    'formulaires': { name: 'Formulaires', icon: 'üìù', color: 'purple' },\r\n    'videos': { name: 'Vid√©os', icon: 'üé•', color: 'red' }\r\n};\r\n\r\nconst moduleNames = {\r\n    'tous': 'Tous les modules',\r\n    'auto': 'AT-AVE-AVEX',\r\n    'loisir': 'VTT, Motoneige, etc.',\r\n    'vr': 'V√©hicules R√©cr√©atifs',\r\n    'tracteur': '√âquipement Agricole'\r\n};\r\n\r\n// Initialisation\r\ndocument.addEventListener('DOMContentLoaded', async () => {\r\n    // ‚úÖ Mode d√©mo : V√©rifier si admin\r\n    if (isDemoMode()) {\r\n        const demoUser = getDemoUser();\r\n        if (demoUser) {\r\n            updateUserInfo(demoUser);\r\n            if (demoUser.role === 'admin') {\r\n                document.getElementById('nav-admin-item')?.classList.remove('hidden');\r\n                document.getElementById('admin-badge-nav')?.classList.remove('hidden');\r\n                document.getElementById('admin-section')?.classList.remove('hidden');\r\n                isAdmin = true;\r\n            }\r\n            await loadResources();\r\n            return;\r\n        }\r\n    }\r\n    \r\n    // V√©rifier l'authentification Firebase\r\n    onAuthChange(async (user) => {\r\n        if (!user) {\r\n            window.location.href = '/login.html';\r\n            return;\r\n        }\r\n        \r\n        updateUserInfo(user);\r\n        await checkAdminStatus(user.uid);\r\n        await loadResources();\r\n    });\r\n    \r\n    // √âv√©nements\r\n    document.getElementById('logout-btn')?.addEventListener('click', handleLogout);\r\n    document.getElementById('signout-link')?.addEventListener('click', handleLogout);\r\n    document.getElementById('search-input')?.addEventListener('input', applyFilters);\r\n    document.getElementById('filter-category')?.addEventListener('change', applyFilters);\r\n    document.getElementById('filter-module')?.addEventListener('change', applyFilters);\r\n    document.getElementById('reset-filters-btn')?.addEventListener('click', resetFilters);\r\n    document.getElementById('upload-btn')?.addEventListener('click', showUploadModal);\r\n    document.getElementById('cancel-upload-btn')?.addEventListener('click', hideUploadModal);\r\n    document.getElementById('upload-form')?.addEventListener('submit', handleUpload);\r\n});\r\n\r\n// Mettre √† jour les infos utilisateur\r\nfunction updateUserInfo(user) {\r\n    // Anciens IDs (top nav - supprimer si pr√©sents)\r\n    if (document.getElementById('user-name')) {\r\n        document.getElementById('user-name').textContent = user.displayName || user.email;\r\n    }\r\n    if (document.getElementById('user-photo')) {\r\n        document.getElementById('user-photo').src = user.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.displayName || user.email)}`;\r\n    }\r\n    \r\n    // Nouveaux IDs (sidebar)\r\n    if (document.getElementById('user-display-name')) {\r\n        document.getElementById('user-display-name').textContent = user.displayName || user.email;\r\n    }\r\n    if (document.getElementById('user-avatar')) {\r\n        document.getElementById('user-avatar').src = user.photoURL || `https://ui-avatars.com/api/?name=${encodeURIComponent(user.displayName || user.email)}`;\r\n    }\r\n}\r\n\r\n// V√©rifier si l'utilisateur est admin\r\nasync function checkAdminStatus(userId) {\r\n    try {\r\n        const userDoc = await getDocs(query(collection(db, 'users'), where('uid', '==', userId)));\r\n        if (!userDoc.empty) {\r\n            const userData = userDoc.docs[0].data();\r\n            isAdmin = userData.role === 'admin';\r\n            \r\n            if (isAdmin) {\r\n                document.getElementById('admin-section')?.classList.remove('hidden');\r\n                document.getElementById('nav-admin-item')?.classList.remove('hidden');\r\n                document.getElementById('admin-badge-nav')?.classList.remove('hidden');\r\n            }\r\n        }\r\n    } catch (error) {\r\n        console.error('Erreur lors de la v√©rification du r√¥le:', error);\r\n    }\r\n}\r\n\r\n// Charger les ressources depuis Firestore\r\nasync function loadResources() {\r\n    console.log('üì• Chargement des ressources...');\r\n    \r\n    try {\r\n        // Afficher skeleton pendant le chargement\r\n        const container = document.getElementById('resources-container');\r\n        if (container) {\r\n            showSkeleton('resources-container', createResourceSkeleton(6));\r\n        }\r\n        \r\n        const q = query(collection(db, 'resources'), orderBy('createdAt', 'desc'));\r\n        const querySnapshot = await getDocs(q);\r\n        \r\n        allResources = [];\r\n        querySnapshot.forEach((doc) => {\r\n            allResources.push({\r\n                id: doc.id,\r\n                ...doc.data(),\r\n                createdAt: doc.data().createdAt?.toDate()\r\n            });\r\n        });\r\n        \r\n        console.log(`‚úÖ ${allResources.length} ressources charg√©es`);\r\n        \r\n        if (allResources.length === 0) {\r\n            showNoResources();\r\n        } else {\r\n            filteredResources = [...allResources];\r\n            renderResources();\r\n        }\r\n        \r\n        document.getElementById('resources-loading')?.classList.add('hidden');\r\n        \r\n    } catch (error) {\r\n        console.error('‚ùå Erreur lors du chargement des ressources:', error);\r\n        toast.error('Erreur lors du chargement des ressources');\r\n        // Si la collection n'existe pas encore, afficher le message\r\n        showNoResources();\r\n        document.getElementById('resources-loading')?.classList.add('hidden');\r\n    }\r\n}\r\n\r\n// Afficher les ressources\r\nfunction renderResources() {\r\n    const container = document.getElementById('resources-container');\r\n    container.classList.remove('hidden');\r\n    \r\n    if (filteredResources.length === 0) {\r\n        showNoResources();\r\n        return;\r\n    }\r\n    \r\n    document.getElementById('no-resources')?.classList.add('hidden');\r\n    \r\n    container.innerHTML = filteredResources.map(resource => {\r\n        const category = categoryNames[resource.category] || { name: resource.category, icon: 'üìÑ', color: 'gray' };\r\n        const date = resource.createdAt \r\n            ? new Date(resource.createdAt).toLocaleDateString('fr-FR')\r\n            : 'Date inconnue';\r\n        \r\n        return `\r\n            <div class=\"file-card bg-white rounded-xl shadow-md hover:shadow-xl transition-all overflow-hidden fade-in\">\r\n                <div class=\"p-6\">\r\n                    <div class=\"flex items-start justify-between mb-4\">\r\n                        <div class=\"file-icon text-4xl\">${category.icon}</div>\r\n                        ${isAdmin ? `\r\n                            <button onclick=\"deleteResource('${resource.id}')\" class=\"text-red-600 hover:text-red-800 transition-colors\">\r\n                                <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\r\n                                </svg>\r\n                            </button>\r\n                        ` : ''}\r\n                    </div>\r\n                    \r\n                    <h3 class=\"text-lg font-bold text-slate-900 mb-2\">${resource.title}</h3>\r\n                    <p class=\"text-sm text-slate-600 mb-4 line-clamp-2\">${resource.description || 'Aucune description'}</p>\r\n                    \r\n                    <div class=\"flex flex-wrap gap-2 mb-4\">\r\n                        <span class=\"px-3 py-1 bg-${category.color}-100 text-${category.color}-700 text-xs font-medium rounded-full\">\r\n                            ${category.name}\r\n                        </span>\r\n                        <span class=\"px-3 py-1 bg-slate-100 text-slate-700 text-xs font-medium rounded-full\">\r\n                            ${moduleNames[resource.module] || resource.module}\r\n                        </span>\r\n                    </div>\r\n                    \r\n                    <div class=\"flex items-center justify-between text-xs text-slate-500 mb-4\">\r\n                        <span>üìÖ ${date}</span>\r\n                        ${resource.downloads ? `<span>‚¨áÔ∏è ${resource.downloads} t√©l√©chargements</span>` : ''}\r\n                    </div>\r\n                    \r\n                    <div class=\"flex gap-2\">\r\n                        <a href=\"${resource.url}\" target=\"_blank\" rel=\"noopener noreferrer\" \r\n                           class=\"flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors font-medium text-center text-sm\">\r\n                            üì• T√©l√©charger\r\n                        </a>\r\n                        <a href=\"${resource.url}\" target=\"_blank\" rel=\"noopener noreferrer\" \r\n                           class=\"px-4 py-2 border-2 border-indigo-600 text-indigo-600 rounded-lg hover:bg-indigo-50 transition-colors font-medium text-center text-sm\">\r\n                            üëÅÔ∏è\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n    }).join('');\r\n}\r\n\r\n// Appliquer les filtres\r\nfunction applyFilters() {\r\n    const searchTerm = document.getElementById('search-input').value.toLowerCase();\r\n    const categoryFilter = document.getElementById('filter-category').value;\r\n    const moduleFilter = document.getElementById('filter-module').value;\r\n    \r\n    filteredResources = allResources.filter(resource => {\r\n        const matchSearch = !searchTerm || \r\n            resource.title.toLowerCase().includes(searchTerm) || \r\n            (resource.description && resource.description.toLowerCase().includes(searchTerm));\r\n        \r\n        const matchCategory = !categoryFilter || resource.category === categoryFilter;\r\n        const matchModule = !moduleFilter || resource.module === moduleFilter;\r\n        \r\n        return matchSearch && matchCategory && matchModule;\r\n    });\r\n    \r\n    renderResources();\r\n}\r\n\r\n// R√©initialiser les filtres\r\nfunction resetFilters() {\r\n    document.getElementById('search-input').value = '';\r\n    document.getElementById('filter-category').value = '';\r\n    document.getElementById('filter-module').value = '';\r\n    filteredResources = [...allResources];\r\n    renderResources();\r\n}\r\n\r\n// Filtrer par cat√©gorie (boutons rapides)\r\nwindow.filterByCategory = function(category) {\r\n    document.getElementById('filter-category').value = category;\r\n    applyFilters();\r\n};\r\n\r\n// Afficher la modal d'upload\r\nfunction showUploadModal() {\r\n    document.getElementById('upload-modal')?.classList.remove('hidden');\r\n}\r\n\r\n// Cacher la modal d'upload\r\nfunction hideUploadModal() {\r\n    document.getElementById('upload-modal')?.classList.add('hidden');\r\n    document.getElementById('upload-form')?.reset();\r\n}\r\n\r\n// G√©rer l'upload\r\nasync function handleUpload(e) {\r\n    e.preventDefault();\r\n    \r\n    if (!isAdmin) {\r\n        toast.error('Acc√®s refus√© : vous devez √™tre administrateur');\r\n        return;\r\n    }\r\n    \r\n    const title = document.getElementById('doc-title').value;\r\n    const description = document.getElementById('doc-description').value;\r\n    const category = document.getElementById('doc-category').value;\r\n    const module = document.getElementById('doc-module').value;\r\n    const url = document.getElementById('doc-url').value;\r\n    \r\n    if (!title || !category || !module || !url) {\r\n        toast.error('Veuillez remplir tous les champs obligatoires');\r\n        return;\r\n    }\r\n    \r\n    const loadingToast = toast.showLoadingToast('Ajout du document...');\r\n    \r\n    try {\r\n        console.log('üì§ Ajout d\\'une nouvelle ressource...');\r\n        \r\n        const user = getCurrentUser();\r\n        await addDoc(collection(db, 'resources'), {\r\n            title,\r\n            description,\r\n            category,\r\n            module,\r\n            url,\r\n            downloads: 0,\r\n            createdAt: new Date(),\r\n            createdBy: user.uid\r\n        });\r\n        \r\n        console.log('‚úÖ Ressource ajout√©e avec succ√®s');\r\n        toast.updateLoadingToast(loadingToast, 'Document ajout√© avec succ√®s !', 'success');\r\n        \r\n        hideUploadModal();\r\n        await loadResources();\r\n        \r\n    } catch (error) {\r\n        console.error('‚ùå Erreur lors de l\\'ajout de la ressource:', error);\r\n        toast.updateLoadingToast(loadingToast, 'Erreur d\\'ajout', 'error');\r\n        toast.error('Erreur lors de l\\'ajout du document', 4000);\r\n    }\r\n}\r\n\r\n// Supprimer une ressource\r\nwindow.deleteResource = async function(resourceId) {\r\n    if (!isAdmin) {\r\n        toast.error('Acc√®s refus√©');\r\n        return;\r\n    }\r\n    \r\n    if (!confirm('Voulez-vous vraiment supprimer ce document ?')) {\r\n        toast.info('Suppression annul√©e', 2000);\r\n        return;\r\n    }\r\n    \r\n    const loadingToast = toast.showLoadingToast('Suppression du document...');\r\n    \r\n    try {\r\n        console.log('üóëÔ∏è Suppression de la ressource:', resourceId);\r\n        await deleteDoc(doc(db, 'resources', resourceId));\r\n        console.log('‚úÖ Ressource supprim√©e');\r\n        \r\n        toast.updateLoadingToast(loadingToast, 'Document supprim√© avec succ√®s !', 'success');\r\n        \r\n        await loadResources();\r\n        \r\n    } catch (error) {\r\n        console.error('‚ùå Erreur lors de la suppression:', error);\r\n        toast.updateLoadingToast(loadingToast, 'Erreur de suppression', 'error');\r\n        toast.error('Erreur lors de la suppression', 4000);\r\n    }\r\n};\r\n\r\n// Afficher message si aucune ressource\r\nfunction showNoResources() {\r\n    document.getElementById('resources-container')?.classList.add('hidden');\r\n    document.getElementById('no-resources')?.classList.remove('hidden');\r\n}\r\n\r\n// D√©connexion\r\nasync function handleLogout() {\r\n    try {\r\n        await signOutUser();\r\n        window.location.href = '/';\r\n    } catch (error) {\r\n        console.error('Erreur lors de la d√©connexion:', error);\r\n    }\r\n}\r\n"],"names":["allResources","filteredResources","isAdmin","categoryNames","moduleNames","isDemoMode","demoUser","getDemoUser","updateUserInfo","loadResources","onAuthChange","user","checkAdminStatus","handleLogout","applyFilters","resetFilters","showUploadModal","hideUploadModal","handleUpload","userId","userDoc","getDocs","query","collection","db","where","error","showSkeleton","createResourceSkeleton","q","orderBy","querySnapshot","doc","showNoResources","renderResources","toast","container","resource","category","date","searchTerm","categoryFilter","moduleFilter","matchSearch","matchCategory","matchModule","title","description","module","url","loadingToast","getCurrentUser","addDoc","resourceId","deleteDoc","signOutUser"],"mappings":"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"}