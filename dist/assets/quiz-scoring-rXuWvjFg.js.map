{"version":3,"file":"quiz-scoring-rXuWvjFg.js","sources":["../../js/utils/quiz-scoring.js"],"sourcesContent":["/**\n * Utilitaires pour le calcul de score et la logique de déblocage mensuel\n * \n * ✅ P0 CRITIQUE: Extraction des fonctions critiques pour tests unitaires\n */\n\n/**\n * Calcule le score d'un quiz basé sur les réponses de l'utilisateur\n * @param {Array} userAnswers - Tableau des réponses de l'utilisateur avec propriété `isCorrect`\n * @returns {number} Score entre 0 et 100, ou 0 si aucune réponse\n */\nexport function calculateScore(userAnswers) {\n    if (!userAnswers || userAnswers.length === 0) {\n        return 0;\n    }\n    \n    const correctCount = userAnswers.filter(a => a.isCorrect).length;\n    const score = Math.round((correctCount / userAnswers.length) * 100);\n    \n    // Validation du score calculé\n    if (isNaN(score) || score < 0 || score > 100) {\n        console.error('❌ Score invalide calculé:', score);\n        return 0;\n    }\n    \n    return score;\n}\n\n/**\n * Détermine si un quiz mensuel est débloqué\n * @param {number} monthIndex - Index du mois (0-11, où 0 = janvier, 11 = décembre)\n * @param {number} currentMonthIndex - Index du mois actuel (0-11)\n * @returns {boolean} true si le quiz est débloqué, false sinon\n */\nexport function isMonthlyQuizUnlocked(monthIndex, currentMonthIndex) {\n    // Validation des paramètres\n    if (typeof monthIndex !== 'number' || monthIndex < 0 || monthIndex > 11) {\n        console.error('❌ monthIndex invalide:', monthIndex);\n        return false;\n    }\n    \n    if (typeof currentMonthIndex !== 'number' || currentMonthIndex < 0 || currentMonthIndex > 11) {\n        console.error('❌ currentMonthIndex invalide:', currentMonthIndex);\n        return false;\n    }\n    \n    // Un quiz est débloqué si son index est <= au mois actuel\n    // Exemple: Si on est en novembre (index 10), les quiz de janvier (0) à novembre (10) sont débloqués\n    return monthIndex <= currentMonthIndex;\n}\n\n/**\n * Détermine l'état d'un quiz mensuel\n * @param {number} monthIndex - Index du mois (0-11)\n * @param {number} currentMonthIndex - Index du mois actuel (0-11)\n * @param {number|null} monthScore - Score obtenu pour ce mois (null si non complété)\n * @returns {string} 'completed' | 'active' | 'incomplete' | 'locked'\n */\nexport function getMonthlyQuizStatus(monthIndex, currentMonthIndex, monthScore = null) {\n    if (monthIndex < currentMonthIndex) {\n        // Mois passé\n        return monthScore !== null ? 'completed' : 'incomplete';\n    } else if (monthIndex === currentMonthIndex) {\n        // Mois actuel\n        return 'active';\n    } else {\n        // Mois futur\n        return 'locked';\n    }\n}\n\n"],"names":["calculateScore","userAnswers","correctCount","a","score","getMonthlyQuizStatus","monthIndex","currentMonthIndex","monthScore"],"mappings":"AAWO,SAASA,EAAeC,EAAa,CACxC,GAAI,CAACA,GAAeA,EAAY,SAAW,EACvC,MAAO,GAGX,MAAMC,EAAeD,EAAY,OAAOE,GAAKA,EAAE,SAAS,EAAE,OACpDC,EAAQ,KAAK,MAAOF,EAAeD,EAAY,OAAU,GAAG,EAGlE,OAAI,MAAMG,CAAK,GAAKA,EAAQ,GAAKA,EAAQ,KACrC,QAAQ,MAAM,4BAA6BA,CAAK,EACzC,GAGJA,CACX,CAgCO,SAASC,EAAqBC,EAAYC,EAAmBC,EAAa,KAAM,CACnF,OAAIF,EAAaC,EAENC,IAAe,KAAO,YAAc,aACpCF,IAAeC,EAEf,SAGA,QAEf"}